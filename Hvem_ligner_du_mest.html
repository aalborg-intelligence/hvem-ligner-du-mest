<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>hvem_ligner_du_mest</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Hvem_ligner_du_mest_files/libs/clipboard/clipboard.min.js"></script>
<script src="Hvem_ligner_du_mest_files/libs/quarto-html/quarto.js"></script>
<script src="Hvem_ligner_du_mest_files/libs/quarto-html/popper.min.js"></script>
<script src="Hvem_ligner_du_mest_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Hvem_ligner_du_mest_files/libs/quarto-html/anchor.min.js"></script>
<link href="Hvem_ligner_du_mest_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Hvem_ligner_du_mest_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Hvem_ligner_du_mest_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Hvem_ligner_du_mest_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Hvem_ligner_du_mest_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="hvem-ligner-du-mest" class="level1">
<h1>Hvem ligner du mest?</h1>
<p>Evnen til at skelne mellem forskellige kategorier er helt central for os som mennesker. Vi kan langt oftest kende forskel på et æble og en pære, på en cykel og en knallert eller på om en person er en kvinde eller en mand. Som regel kan vi endda med stor sikkerhed kende forskel blot med et hurtigt blik og uden at se hele objektet, men en sjælden gang tager vi dog fejl, hvilke kan føre til pinlige situationer.</p>
<p>Vi har også apps på vores telefoner eller computere, som ud fra et billede kan genkende personer eller fra nogle få strofer kan genkende en sang. Der er scannere i lufthavne og andre steder, som kan genkende farlige ting, og biler har autopiloter, der selv holder afstanden til forankørende. Vi har også apps, som går den anden vej, og forvrænger et billede af en person, så personen bliver svær at genkende, men ofte alligevel kan genkendes, selvom ansigtet er fordrejet.</p>
<p>Så alle steder og hele tiden foregår der bevist eller ubevist en skelnen mellem forskellige kategorier, men hvordan foregår denne skelnen i grunden? Hvis vi skulle svare fyldestgørende på dette spørgsmål, om overhovedet muligt, ville det nok betyde et langt studie på universitetet og sikkert mere end dette, men lad os starte med et meget simpelt eksempel, og tage den derfra.</p>
<p>Vi får brug bruge din viden om afstande mellem punkter, men kommer også til senere at se på andre former for afstand. Det er en fordel af lave opgaverne i grupper, da der kan blive en del af diskutere.</p>
<section id="case-1-afstand-mellem-to-punkter" class="level2">
<h2 class="anchored" data-anchor-id="case-1-afstand-mellem-to-punkter">Case 1 – Afstand mellem to punkter</h2>
<p><strong>Opgave 1</strong></p>
<p>På figuren nedenforfor er der 10 røde punkter, 10 blå punkter og 10 grønne punkter – samt et enkelt gråt punkt P. Vurdér ud fra placeringen af det grå punkt P, om du synes, at dette punkt bør være rødt, blåt eller grønt for at passe bedst ind.</p>
<p><img src="media/image1.png" style="width:4in;height:4in"></p>
<p><strong>Opgave 2</strong></p>
<p>På den næste figur er der andre 31 punkter, samt en cirkel med radius 10 omkring det grå punkt P(15,15).</p>
<p>Tæl hvor mange røde, blå og grønne punkter, der ligger inde i cirklen. Kan det bruges til at beslutte, hvilken farve det grå punkt bør have?</p>
<p>Hvilket resultat giver det, hvis cirklens radius kun var halvt så stor? Vurdér på øjemål.</p>
<p><img src="media/image2.png" style="width:4in;height:4in"></p>
<p><strong>Opgave 3</strong></p>
<p>Det går nok ikke i længden blot at ville vurdere på øjemål, så du må til at regne lidt. Her er koordinater og farver på de 10 punkter, der ligger tættest på det grå punkt i opgave 2.</p>
<p>Udregn afstanden fra det grå punkt P(15 ; 15) til hver af disse 10 punkter.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Farve</th>
<th style="text-align: center;">1</th>
<th style="text-align: center;">2</th>
<th style="text-align: center;">3</th>
<th style="text-align: center;">4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Blå</td>
<td style="text-align: center;">(13,8 ; 19,9)</td>
<td style="text-align: center;">(8,2 ; 14,9)</td>
<td style="text-align: center;">(16,4 ; 14,1)</td>
<td style="text-align: center;">(15,5 ; 13,1)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Rød</td>
<td style="text-align: center;">(10,6 ; 16,0)</td>
<td style="text-align: center;">(16,3 ; 15,2)</td>
<td style="text-align: center;">(15,6 ; 11,3)</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Grøn</td>
<td style="text-align: center;">(11,1 ; 18,6)</td>
<td style="text-align: center;">(16,4 ; 17,5)</td>
<td style="text-align: center;">(21,7 ; 13,4)</td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p>Afgør så, hvor mange af hver farve, der ligger indenfor en cirkel med radius 5 omkring det grå punkt. Hvilken farve tyder det på, at det grå punkt bør have?</p>
<p><strong>Opgave 4</strong></p>
<p>Overvej, hvad der sker, hvis cirklens radius vælges som en meget lille værdi eller som en meget stor værdi i forhold til at bruge metoden til at bestemme, hvilken farve det grå punkt bør have.</p>
<p><strong>Opgave 5</strong></p>
<p>Tabellen viser koordinater og farver på 27 andre punkter. Lav et punktplot i dit CAS-værktøj med disse punkter.</p>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Farve</th>
<th style="text-align: center;">1</th>
<th style="text-align: center;">2</th>
<th style="text-align: center;">3</th>
<th style="text-align: center;">4</th>
<th style="text-align: center;">5</th>
<th style="text-align: center;">6</th>
<th style="text-align: center;">7</th>
<th style="text-align: center;">8</th>
<th style="text-align: center;">9</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Blå</td>
<td style="text-align: center;">(15,25)</td>
<td style="text-align: center;">(10,20)</td>
<td style="text-align: center;">(15,30)</td>
<td style="text-align: center;">(8,16)</td>
<td style="text-align: center;">(6,10)</td>
<td style="text-align: center;">(17,15)</td>
<td style="text-align: center;">(23,17)</td>
<td style="text-align: center;">(15,14)</td>
<td style="text-align: center;">(14,4)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Rød</td>
<td style="text-align: center;">(30, 5)</td>
<td style="text-align: center;">(18,18)</td>
<td style="text-align: center;">(21,9)</td>
<td style="text-align: center;">(6,24)</td>
<td style="text-align: center;">(25,25)</td>
<td style="text-align: center;">(18,16)</td>
<td style="text-align: center;">(12,11)</td>
<td style="text-align: center;">(8,10)</td>
<td style="text-align: center;">(16,13)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Grøn</td>
<td style="text-align: center;">(8,28)</td>
<td style="text-align: center;">(12,20)</td>
<td style="text-align: center;">(16,20)</td>
<td style="text-align: center;">(21,14)</td>
<td style="text-align: center;">(13,10)</td>
<td style="text-align: center;">(12,13)</td>
<td style="text-align: center;">(20,18)</td>
<td style="text-align: center;">(14,16)</td>
<td style="text-align: center;">(18,10)</td>
</tr>
</tbody>
</table>
<p>Indtegn en cirkel omkring det grå punkt P(15,15) og brug cirklen til at vurdere, hvilken farve punktet bør have. Ændr på radius af cirklen og se, om det gør en forskel.</p>
<p>Diskutér, hvilken radius, der er bedst.</p>
<p><strong>Afslutning på case 1</strong></p>
<p>Der bliver nok klart, at der er brug for en metode til at beslutte, hvor stor radius skal være for at få det bedste resultat. Kort og lidt simpelt forklaret, involverer det noget, som man kalder træningsdata, hvor man har en række grå punkter, som man faktisk godt kender den rigtige farve på. Lad os sige, at træningsdata er 50 grå punkter. Så afprøver man forskellige værdier af radius, f.eks. 5, 10 og 20. Hvis metoden med radius 5 “gætter” rigtige for 35 af de 50 punkter, med radius 10 “gætter” 31 korrekt og med radius 20 “gætter” 39 korrekt, ja så er radius 20 jo bedst. Helt så simpelt er det ikke, men hvis du eller I har lyst til at blive klogere på dette, så vil jeg henvise til vores materiale på <a href="https://aalborg-intelligence.ai/" class="uri">https://aalborg-intelligence.ai/</a>.</p>
</section>
<section id="case-2-manhattan-afstand" class="level2">
<h2 class="anchored" data-anchor-id="case-2-manhattan-afstand">Case 2 – Manhattan afstand</h2>
<p>I nogle situationer giver den almindelige afstand mellem punkter ikke så god mening. F.eks. er de fleste veje på Manhattan i New York enten nord-syd eller øst-vest, så man kan ikke bare gå eller køre “på skrå”, men kun lodret eller vandret.</p>
<p>Hvis vi ser på punkterne P(2,3) og Q(5,7), så er den almindelige afstand 5 vha. Pythagoras, mens Manhattan afstanden er 3+4=7.</p>
<p><img src="media/image3.png" style="width:4in;height:4in"></p>
<p><strong>Opgave 6</strong></p>
<p>Indtegn punkterne A(1,7), B(3,4) og C(5,7) i et koordinatsystem.</p>
<p>Udregn både almindelig afstand og Manhattan afstand mellem hvert par af punkter.</p>
<p><strong>Opgave 7</strong></p>
<p>I eksemplet og i opgave 6 var Manhattan afstanden større end den almindelige afstand, men kan Manhattan afstanden være mindre end den almindelige afstand eller kan de to afstande være ens?</p>
<p><strong>Opgave 8</strong></p>
<p>Se på figuren i opgave 2 igen. Punkterne inde i cirklen har en almindelig afstand på under 10 til det grå punkt, men hvilke af punkterne har en Manhattan afstand på under 10 til det grå punkt?</p>
<p>Hvilken farve bør det grå punkt have, hvis Manhattan afstanden benyttes? Giver det samme resultatet, som du fik i opgave 2?</p>
<p><strong>Opgave 9</strong></p>
<p>Opstil en formlen for den almindelige afstand mellem to punkter med koordinaterne (x<sub>1</sub>, y<sub>1</sub>) og (x<sub>2</sub>, y<sub>2</sub>). Det er en formel, du kender i forvejen.</p>
<p>Opstil tilsvarende en formel for Manhattan afstanden. Det er nok ikke en formel, du har set før.</p>
</section>
<section id="case-3-hvor-ens-er-to-tekster" class="level2">
<h2 class="anchored" data-anchor-id="case-3-hvor-ens-er-to-tekster">Case 3 – Hvor ens er to tekster?</h2>
<p>I forbindelse med at undersøge om en tekst, f.eks. en dansk stil, er plagiat, bliver det relevant at sammenligne, hvor ens to tekster er. Helt så avanceret bliver det dog ikke her.</p>
<p>Vi vil kun se meget simpelt på ord med 5 bogstaver, og hvordan man f.eks. kan måle afstande mellem forskellige ord. Vi vil se på alle kombinationer af 5 bogstaver, også f.eks. xtmsp, selvom de ikke er normale ord.</p>
<p><strong>Opgave 10</strong></p>
<p>Hvilket af ordene “model”, “metal” og “nudts” synes du, at ordet “nedes” ligner mest? Begrund dit svar.</p>
<p><strong>Opgave 11</strong></p>
<p>Hvis vi vælger, at afstanden mellem to ord er antallet af bogstaver, som er forskellige incl.&nbsp;placering, så er afstanden mellem “xtmsp” og “xmtsq” 3, da kun 2 af de 5 bogstaver matcher incl.&nbsp;placering i de to ord, nemlig x og s.</p>
<p>Udregn med den metode afstanden mellem “nedes” og hver af de 3 ord i opgave 10. Var det sådan du allerede havde gjort det i opgave 10, eller gav dette et andet resultat?</p>
<p><strong>Opgave 12</strong></p>
<p>Overvej og diskuter andre måder at regne afstand mellem to ord på hver 5 bogstaver. Det kunne f.eks. være noget, hvor ombytning af to nabobogstaver giver mindre afstand end helt tilfældige andre bogstaver, så f.eks. “kolon” og “kloon” er tættere på hinanden end “kolon” og “kston”.</p>
</section>
<section id="case-4-dna-strenge-og-alignment" class="level2">
<h2 class="anchored" data-anchor-id="case-4-dna-strenge-og-alignment">Case 4 – DNA-strenge og alignment</h2>
<p>Uden i øvrigt at komme ind på biologien repræsenteres DNA som meget lange tekststrenge, der består af bogstaverne A, T, C og G. Når mennesker og chimpanser er meget ens, kommer det til udtryk ved, at DNA-strengen for et menneske ligner den for en chimpanse meget, der er altså en kort afstand mellem DNA for et menneske og DNA for en chimpanse. Indenfor biologien kaldes dette for alignment.</p>
<p>Følgende eksempel, der viser et meget lille udsnit af DNA fra mus, rotter, mennesker og gær er taget fra <a href="https://www.nucleus.dk/files/docs/Bioteknologibogen.dk/Tema12-Link5.pdf">Tema12-Link5.pdf (nucleus.dk)</a>, der kan anbefales, hvis man ønsker at arbejde mere med alignment.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Dyr</th>
<th style="text-align: center;">Kode</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Mus</td>
<td style="text-align: center;">SWAWAEGWTRYGP</td>
</tr>
<tr class="even">
<td style="text-align: center;">Rotte</td>
<td style="text-align: center;">KWVWAEGWTRYGP</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Menneske</td>
<td style="text-align: center;">AWAWAEGWTRYGP</td>
</tr>
<tr class="even">
<td style="text-align: center;">Gær</td>
<td style="text-align: center;">EWLRKPGWVKYVP</td>
</tr>
</tbody>
</table>
<p>Hvis afstanden her regnes som antal bogstaver, der er forskellige, ses det at afstanden mellem mus og rotte er på 2, som vist nedenfor.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Dyr</th>
<th style="text-align: center;">Kode</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Mus</td>
<td style="text-align: center;"><b>S</b>W<b>A</b>WAEGWTRYGP</td>
</tr>
<tr class="even">
<td style="text-align: center;">Rotte</td>
<td style="text-align: center;"><b>K</b>W<b>V</b>WAEGWTRYGP</td>
</tr>
</tbody>
</table>
<p><strong>Opgave 13</strong></p>
<p>Udregn på tilsvarende vis afstandene mellem mus-menneske, mus-gær, rotte-menneske, rotte-gær og menneske-gær.</p>
<p>Når resultatet sikkert virker overraskende, skyldes det, at vi kun har set på et meget lille udsnit af DNA for de fire. Hvis man ser på hele det protein, som udsnittet stammer fra, bliver resultatet mere som forventet.</p>
<p><img src="media/image4.png" style="width:6.69306in;height:1.58264in"></p>
</section>
<section id="case-5-hvilken-politiker-er-du-mest-enig-med" class="level2">
<h2 class="anchored" data-anchor-id="case-5-hvilken-politiker-er-du-mest-enig-med">Case 5 – Hvilken politiker er du mest enig med?</h2>
<p>Op til både folketingsvalg og kommunal- og regionalvalg kan man svare på en række spørgsmål, hvorefter ens svar bliver sammenlignet med politikernes svar på de samme spørgsmål. Herefter kan man så se, hvem man er mest enig med.</p>
<p>Her er et eksempel fra kommunal- og regionalvalget i 2021.</p>
<p><a href="https://www.altinget.dk/valg/KV21/kandidattest">Tag kandidattesten Kommunalvalg 2021 - Altinget - Alt om politik: altinget.dk</a></p>
<p><strong>Opgave 14</strong></p>
<p>Vælg din egen kommune i testen og besvar spørgsmålene. Se derefter, hvem dine svar er mest enige med, og hvor mange procent enige I er.</p>
<p>Men hvordan virker det mon? Hvordan vurderes, hvilken kandidat du er mest enig med, og hvordan udregnes, hvor mange procent enige I er?</p>
<p>Til hvert spørgsmål kan der svares “helt uenig”, “uenig”, “enig” eller “helt enig”, men desuden er der en skjult “neutral” mulighed i midten, som man ikke kan vælge.</p>
<table class="table">
<tbody>
<tr class="odd">
<td style="text-align: left;">Helt uenig</td>
<td style="text-align: left;">Uenig</td>
<td style="text-align: left;">Neutral</td>
<td style="text-align: left;">Enig</td>
<td style="text-align: left;">Helt enig</td>
</tr>
</tbody>
</table>
<p>Afstanden mellem to svar regnes som antal “felter” i tabellen, så afstanden mellem Uenig og Enig er 2, mens afstanden mellem Enig og Helt enig er 1, og den største afstand er 4.</p>
<p><strong>Opgave 15</strong></p>
<p>Figuren viser en persons svar og et partis svar på 23 spørgsmål til kommunalvalget i 2021. Ved et partis svar forstår det svar, som flest af kandidaterne fra partiet har givet (ved lighed afgjort ud af, hvilken kandidat, der står først på listen). Så det er typetallet (typesvaret), der er anvendt for partierne, ikke gennemsnittet af svarene fra partiets kandidater. Figuren er fra testen på Altinget. Bemærk, at antallet af spørgsmål kan variere fra kommune til kommune, så du har måske færre eller flere spørgsmål.</p>
<p><img src="media/image5.png" style="width:8in;height:2in"></p>
<p>Afstanden i det første spørgsmål er 1, afstanden i det andet spørgsmål også 1 og afstanden i det tredje spørgsmål er 2 pga. den skjulte “neutral” mulighed i midten.s</p>
<p>Udregn afstanden i hver af de øvrige 20 spørgsmål.</p>
<p>Læg så afstandene sammen, hvilket svarer til en form for Manhattan afstand, da afstanden regnes for hvert enkelt spørgsmål for sig. Hvilken samlet afstand giver det?<strong><br>
</strong></p>
<p><strong>Opgave 16</strong></p>
<p>Hvad er den mindst mulig afstand samlet for de 23 spørgsmål? Hvordan skal svarene for partiet og for vælgeren se ud fra at få denne afstand?</p>
<p>Hvad er den størst mulige afstand, og hvordan skal svarene så se ud?</p>
<p><strong>Opgave 17</strong></p>
<p><img src="media/image7.png" style="width:6.69306in;height:1.70139in"></p>
<p>Siden angiver, at enigheden med Socialdemokratiet er på 79%.</p>
<p>Overvej, hvordan den afstand du udregnede i opgave 14 og den største mulige afstand, som du fandt i opgave 15, kan betyde, at enigheden er 79%.</p>
<p><strong>Opgave 18</strong></p>
<p>Vend tilbage til dine egne svar på testen.</p>
<p>Beregn afstand og procent i forhold til den kandidat, du var mest enig med, og den kandidat, du var mest uenig med.</p>
<p>Beregn desuden afstand og procent til det parti, du var mest enig med, og til det parti, du var mest uenig med.</p>
<p>Passe dine udregninger med sidens procenter?</p>
<p><strong>Opgave 19 (svær)</strong></p>
<p>Den kandidat, som svarene i opgave 15 var mest enig med, giver en procent på 76%, så procenten for samtlige kandidater fra Socialdemokratiet er altså lavere end procenten for selve partiet.</p>
<p>Det virker måske umiddelbart underligt. Overvej, hvorfor det faktisk er korrekt ud fra den metode, som siden anvender til beregningerne.</p>
<p>Diskutér derefter, om procenten for partiet kunne være beregnet anderledes.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>